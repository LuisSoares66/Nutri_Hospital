{% extends "base.html" %}

{% block content %}
<div class="container">

  <h1>Hospitais</h1>

  <!-- AÃ‡Ã•ES PRINCIPAIS -->
  <div class="actions" style="display:flex; gap:12px; flex-wrap:wrap; margin-bottom:20px;">

  <td style="display:flex; gap:6px; flex-wrap:wrap;">

    <a class="btn secondary"
      href="{{ url_for('main.contatos', hospital_id=h.id) }}">
      CONTATOS
    </a>

    <a class="btn secondary"
      href="{{ url_for('main.dados_hospital', hospital_id=h.id) }}">
      DADOS
    </a>

    <a class="btn secondary"
      href="{{ url_for('main.produtos_hospital', hospital_id=h.id) }}">
      PRODUTOS
    </a>

    <a class="btn secondary"
      href="{{ url_for('main.relatorios', hospital_id=h.id) }}">
      RELATÃ“RIOS
    </a>

    <!-- IMPORTAR EXCEL (UMA VEZ) -->
    <form method="POST"
          action="{{ url_for('main.importar_excel_uma_vez') }}"
          onsubmit="return confirm('Importar dados do Excel apenas UMA vez?');">
      <button class="btn secondary" type="submit">
        â¬† Importar Excel
      </button>
    </form>

    <!-- ZERAR BANCO (ADMIN + SENHA) -->
    <form method="POST"
          action="{{ url_for('main.reset_db') }}"
          onsubmit="return confirm('TEM CERTEZA? Isso apaga TODOS os dados do banco!');"
          style="display:flex; gap:8px; align-items:center;">

      <input type="password"
             name="reset_password"
             placeholder="Senha reset"
             required>

      <input type="text"
             name="confirm_text"
             placeholder="Digite APAGAR"
             required>

      <button class="btn danger" type="submit">
        ðŸ§¨ Zerar Banco
      </button>
    </form>

    <form method="POST"
          action="{{ url_for('main.apagar_hospital', hospital_id=h.id) }}"
          onsubmit="return confirm('Tem certeza que deseja APAGAR este hospital e TODOS os dados relacionados?');"
          style="display:inline;">
      <button class="btn danger" type="submit">
        ðŸ—‘ APAGAR
      </button>
    </form>



  </div>

  <!-- LISTA DE HOSPITAIS -->
  {% if hospitais %}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nome do Hospital</th>
          <th>AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody>
        {% for h in hospitais %}
          <tr>
            <td>{{ h.id }}</td>
            <td>{{ h.nome_hospital }}</td>
            <td style="display:flex; gap:6px; flex-wrap:wrap;">
              <a class="btn secondary"
                 href="{{ url_for('main.contatos', hospital_id=h.id) }}">
                 CONTATOS
              </a>

              <a class="btn secondary"
                 href="{{ url_for('main.dados_hospital', hospital_id=h.id) }}">
                 DADOS
              </a>

              <a class="btn secondary"
                 href="{{ url_for('main.produtos_hospital', hospital_id=h.id) }}">
                 PRODUTOS
              </a>

              <a class="btn secondary"
                 href="{{ url_for('main.relatorios', hospital_id=h.id) }}">
                 RELATÃ“RIOS
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Nenhum hospital cadastrado.</p>
  {% endif %}

</div>
{% endblock %}
